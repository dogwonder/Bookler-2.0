### Ingredients

* Kosher salt
* 1 ½ pounds (680g) green beans, trimmed and cut into 2-inch lengths
* 1 medium yellow onion, roughly chopped
* ½ pound (225g) button, stems trimmed
* 3 cups (710ml) vegetable stock or low-sodium broth, plus more as needed
* One (2-pound; 900g) head cauliflower, cored and cut into medium florets (1 ½ pounds or 680g after prep)
* 3 tbsp (45ml) extra-virgin olive oil
* 1 tbsp nutritional yeast
* 1 tsp garlic powder
* 1 tsp fresh thyme leaves or ½ tsp dried thyme
* Finely grated zest of 1 lemon (optional)
* Freshly ground black pepper
* Rapeseed oil or other neutral oil, for frying
* 1 large red onion, halved and thinly sliced into half moons

### Method

1. Fill a large saucepan about halfway with water and bring to a boil. Season generously with salt, then add the green beans and cook until just tender, about 6 minutes. Drain the beans and rinse out the saucepan.
2. In a food processor, pulse the yellow onion and mushrooms until finely chopped, about 15 pulses. Transfer to a large bowl and rinse out food processor bowl.
3. In the same saucepan used for the green beans, bring vegetable broth to a simmer over medium heat. Reduce heat to medium-low and add the cauliflower. Cover and cook until the cauliflower is very tender when pierced with a knife, about 10 minutes. (If the broth seems to be steaming from under the lid, reduce the heat to low. You want to cook the cauliflower while retaining as much liquid as possible.)
4. Transfer the cauliflower and cooking liquid to the rinsed-out food processor bowl and let cool slightly. Purée the cauliflower until very smooth. (You can also purée the cauliflower using a high-powered blender, if you have one, which will give you the best texture. However, you can achieve a smooth purée if you let a food processor run for a solid minute or more and scrape down the sides occasionally.)
5. Preheat the oven to 350°F (180°C). Rinse out the saucepan again, then dry well. Add olive oil and heat over medium heat until shimmering. Add mushrooms and onions and season generously with salt. Cook, stirring frequently, until mushrooms and onions stop releasing water and are tender, about 10 minutes.
6. Add the cauliflower sauce, nutritional yeast, garlic powder, thyme, and lemon zest (if using) and season with salt and pepper. (Don’t be shy with the salt and pepper!) Stir in the green beans. If the sauce seems too thick, add more broth until you reach a consistency you like. Transfer the green beans and sauce to a 2-quart baking dish.
7. Bake the casserole until hot and bubbling, 25 to 30 minutes.
8. Meanwhile, in a medium saucepan, heat ½ inch rapeseed oil until the oil is hot enough that it bubbles when you add a piece of red onion. Add half of the sliced red onion and fry, stirring occasionally, until golden brown, 9 to 10 minutes. Using tongs or a spider, transfer the onions to a paper towel–lined plate. Season generously with salt. Repeat with remaining red onions. When the onions are cool enough to touch, use your hands to fluff them a bit so they crisp up.
9. Let casserole cool for about 5 minutes, then top with the onions and serve.